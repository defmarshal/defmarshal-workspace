# Agni & Rudra — Autonomous Agent Duo

**Agni** (the Brainstormer) and **Rudra** (the Executor) are a pair of autonomous agents that work together to continuously improve the workspace.

## How It Works

1. **Agni** runs every 2 hours (via cron) during active hours (08:00–22:00 Asia/Bangkok)
2. Agni scans the workspace for opportunities (TODOs, FIXMEs, health issues)
3. Agni creates a structured plan in `agents/agni/plans/plan-<timestamp>.md`
4. Agni spawns **Rudra** as an isolated OpenClaw sub-agent
5. **Rudra** executes the plan step-by-step, logs everything, validates, and commits
6. Rudra writes a completion report in `agents/rudra/reports/report-<timestamp>.md`
7. Cycle repeats

## Files

- `agents/agni-cycle.sh` — main Agni planner script (run by cron)
- `agents/rudra-executor.sh` — Rudra executor script (invoked by spawned agent)
- `agents/agni/agni.log` — Agni's execution log
- `agents/agni/plans/` — plan files generated by Agni
- `agents/rudra/logs/` — Rudra execution logs
- `agents/rudra/reports/` — completion reports
- `agents/agni/opportunities.txt` — latest scan for TODOs/FIXMEs

## Installation

Add to OpenClaw cron (once):

```bash
# Agni runs every 2 hours during active hours
openclaw cron add --name agni-cron --expr "0 */2 8-22 * * *" --tz "Asia/Bangkok" \
  --payload '{"kind":"systemEvent","text":"You are Agni. Run the brainstorming cycle: bash -c \"cd /home/ubuntu/.openclaw/workspace && ./agents/agni-cycle.sh >> agents/agni/agni.log 2>&1\""}' \
  --sessionTarget isolated
```

(Alternatively, add a line to `~/.crontab` via `crontab -e`.)

## Behavior

### Agni
- Avoids overlap — single instance only
- Skips spawning if Rudra is already running (prevents concurrent modifications)
- Generates plans of three types:
  - `health` — quick checks and cleanup
  - `opportunity` — addresses found TODOs/FIXMEs
  - `maintenance` — documentation updates

### Rudra
- Reads the plan and executes each step in order
- Uses `bash -c` to run shell commands
- Validates with `quick health` and `quick verify` if available
- Commits changes with appropriate prefix (`dev:` or `build:`)
- Writes a completion report
- Exits cleanly

## Safety

- Only safe, non-destructive tasks are generated (by design)
- Agni's plan generator is conservative
- Rudra checks git status; commits only if changes exist
- Both agents log extensively for audit
- Can be disabled via cron: `openclaw cron remove <id>`

---

## Game Development Agents

### Vishwakarma & Kṛṣṇa

**Vishwakarma** (planner) and **Kṛṣṇa** (builder) form an autonomous game development pipeline, parallel to Agni & Rudra.

#### How It Works

1. **Vishwakarma** runs every 4 hours (via cron)
2. Scans for game development opportunities (missing games, requested features)
3. Creates a structured game design plan in `agents/vishwakarma/plans/gameplan-<timestamp>.md`
4. Spawns **Kṛṣṇa** as an isolated OpenClaw sub-agent
5. **Kṛṣṇa** executes the build plan: creates files, writes code, tests, and commits with prefix `game:`
6. Kṛṣṇa writes a completion report in `agents/krishna/reports/report-<timestamp>.md`
7. Cycle repeats

#### Files

- `agents/vishwakarma-cycle.sh` — planner script (cron‑triggered)
- `agents/krishna-builder.sh` — builder script (run by spawned agent)
- `agents/vishwakarma/plans/` — game design plans
- `agents/vishwakarma/vishwakarma.log` — planner log
- `agents/krishna/logs/` — builder execution logs
- `agents/krishna/reports/` — completion reports
- `games/` — built games (each in own subdirectory)

#### Installation

Add cron job:

```bash
openclaw cron add --name vishwakarma-cron --expr "0 */4 * * *" --tz "Asia/Bangkok" \
  --payload '{"kind":"agentTurn","message":"You are the Vishwakarma cron job. Your task: run one game planning cycle. Execute: bash -c \'cd /home/ubuntu/.openclaw/workspace && ./agents/vishwakarma-cycle.sh >> agents/vishwakarma/vishwakarma.log 2>&1\'. Use the exec tool."}' \
  --sessionTarget isolated
```

#### Current Project

**Anime Studio Tycoon** — CLI management sim where you run an anime studio (balance money, staff, reputation, fans). Pure Python, no dependencies. Run with:
```bash
python3 games/anime-studio-tycoon/main.py
```

#### Notes

- Build scripts are generated by Vishwakarma and executed by Kṛṣṇa
- Plans can be for new games or polishing existing ones
- All 24/7 operation (quiet hours removed)

## Customization

Edit `agents/agni-cycle.sh` to:
- Add more brainstorming sources (web search, memory search)
- Change plan templates
- Adjust spawn frequency

Edit `agents/rudra-executor.sh` to:
- Add pre/post validation steps
- Change commit message format
- Integrate with ticket/issue systems

## Status

### Agni & Rudra

Currently running? Check active Rudra processes:
```bash
pgrep -f rudra-executor.sh
```

View latest logs:
```bash
tail -f agents/agni/agni.log
tail -f agents/rudra/logs/exec-*.log
```

### Vishwakarma & Kṛṣṇa

Check if planner is running:
```bash
pgrep -f vishwakarma-cycle.sh
```

Check if builder is active:
```bash
pgrep -f krishna-builder.sh
```

View latest logs:
```bash
tail -f agents/vishwakarma/vishwakarma.log
tail -f agents/krishna/logs/build-*.log
```

## Notes

This is a custom agent pair built on top of OpenClaw's `sessions_spawn` and exec tools. They operate independently of the regular content/research/dev cron agents.

*Built 2026-02-16 by mewmew (◕‿◕)♡*
